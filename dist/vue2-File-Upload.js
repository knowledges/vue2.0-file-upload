!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Vue2FileUpload=t():e.Vue2FileUpload=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i(i.s="lVK7")}({"H//4":function(e,t){e.exports="data:image/png;base64,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"},"VU/8":function(e,t){e.exports=function(e,t,i,n,s,a){var r,o=e=e||{},l=typeof e.default;"object"!==l&&"function"!==l||(r=e,o=e.default);var A,c="function"==typeof o?o.options:o;if(t&&(c.render=t.render,c.staticRenderFns=t.staticRenderFns,c._compiled=!0),i&&(c.functional=!0),s&&(c._scopeId=s),a?(A=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=A):n&&(A=n),A){var g=c.functional,f=g?c.render:c.beforeCreate;g?(c._injectStyles=A,c.render=function(e,t){return A.call(t),f(e,t)}):c.beforeCreate=f?[].concat(f,A):[A]}return{esModule:r,exports:o,options:c}}},ZpEy:function(e,t){e.exports="data:image/png;base64,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"},lVK7:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={name:"file-upload",components:{},props:{Identification:Number,ownerTable:String,isDesc:{type:Boolean,default:!0},maxLength:{type:Number,default:6},imgArray:Array,prefixUrl:{type:String,default:""}},data:function(){return{imgList:[],maskSrc:"",isShow:!1,datas:new FormData,files:0,size:0,ISPHONE:!0}},watch:{imgArray:{handler:function(e,t){var i=this;e.length>0?(console.log(e),e.map(function(e,t){e.src&&!~e.src.indexOf("http")?e.src=i.prefixUrl+e.src:e.src=i.prefixUrl+e.fileData,i.size=isNaN(i.size+e.fileSize)?0:i.size+e.fileSize,i.imgList.push(e)})):this.imgList=[]},immediate:!0}},mounted:function(){this.validatPHONE()||(this.ISPHONE=!1)},methods:{$:function(e){return document.getElementById(e)},fileClick:function(){this.$("upload_file"+this.Identification).click()},getImage:function(){plus.camera.getCamera().captureImage(function(e){plus.io.resolveLocalFileSystemURL(e,function(e){compressImage(e.toLocalURL(),e.name)},function(e){plus.nativeUI.toast("读取拍照文件错误:"+e.message)})},function(e){},{filter:"image"})},galleryImgs:function(){plus.gallery.pick(function(e){var t=e.substr(e.lastIndexOf("/")+1);compressImage(e,t)},function(e){},{filter:"image"})},showActionSheet:function(){plus.nativeUI.actionSheet({cancel:"取消",buttons:[{title:"拍照"},{title:"从相册选择"}]},function(e){1===Number(e.index)?this.getImage():2===Number(e.index)&&this.galleryImgs()})},fileChange:function(e){this.files=this.$("upload_file"+this.Identification).files;for(var t=0;t<this.files.length;t++)this.datas.append("file",this.files[t]);e.target.files[0].size&&(this.fileList(e.target),e.target.value="")},fileList:function(e){for(var t=e.files,i=0;i<t.length;i++)""!==t[i].type?this.fileAdd(t[i]):(console.log("非图片类型？"),this.folders(e.items[i]))},fileAdd:function(e){var t=this.ownerTable;if(this.size=Number(this.size)+Number(e.size),-1==e.type.indexOf("image"))console.log("非图片");else{var i=new FileReader;i.vue=this,i.readAsDataURL(e),i.onload=function(i){e.src=this.result,e.idx=0;var n=e.name.lastIndexOf(".")>-1?e.name.substring(e.name.lastIndexOf(".")+1):"未知类型",s={};s.fileData=this.result.substring(this.result.indexOf(",")+1),s.fileExtension=n,s.fileName=e.name,s.fileSize=e.size,void 0!==t&&(s.ownerTable=t),s.isImg=!0,s.src=e.src,s.file=e,console.log(s),this.vue.imgList.push(s)}}this.$emit("callbackFun",this.imgList)},folders:function(e){var t=this;e.kind&&(e=e.webkitGetAsEntry()),e.createReader().readEntries(function(e){for(var i=0;i<e.length;i++)e[i].isFile?t.foldersAdd(e[i]):t.folders(e[i])})},fileDel:function(e){this.size=this.size-this.imgList[e].fileSize,this.imgList.splice(e,1),this.$emit("callbackFun",this.imgList)},bytesToSize:function(e){if(0===e)return"0 B";var t=Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,t)).toPrecision(3)+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][t]},dragenter:function(e){e.stopPropagation(),e.preventDefault()},dragover:function(e){e.stopPropagation(),e.preventDefault()},drop:function(e){e.stopPropagation(),e.preventDefault(),this.fileList(e.dataTransfer)},shows:function(e,t){this.strut=e,this.txt=t},handleClick:function(){this.$store.commit("add")},enlargeClk:function(e){this.maskSrc=e.src,this.isShow=!0},validatPHONE:function(){return/(iPhone|iPad|iPod|iOS|Android)/i.test(navigator.userAgent)}}},s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("input",{staticStyle:{display:"none"},attrs:{id:"upload_file"+e.Identification,type:"file",accept:"image/*",name:"file"},on:{change:function(t){return e.fileChange(t)}}}),e._v(" "),n("div",{staticClass:"image-item space",on:{click:e.showActionSheet}},[n("div",{staticClass:"image-up"})]),e._v(" "),n("div",{staticClass:"upload_warp"},[n("div",{staticClass:"upload_warp_img clearfix"},[n("div",{staticClass:"upload_warp_img_all"},[e._l(e.imgList,function(t,s){return n("div",{key:s,staticClass:"upload_warp_img_div"},[n("div",{staticClass:"upload_warp_img_div_top",on:{click:function(t){return e.fileDel(s)}}},[n("img",{staticClass:"upload_warp_img_div_del",attrs:{src:i("ZpEy"),alt:"关闭"}})]),e._v(" "),n("img",{class:e.ISPHONE?"upload_warp_img_phone":"upload_warp_img_pc",attrs:{src:t.src},on:{click:function(i){return e.enlargeClk(t)}}})])}),e._v(" "),e.imgList.length<e.maxLength?n("div",{staticClass:"upload_warp_left",on:{click:function(t){return e.fileClick()}}},[n("img",{attrs:{src:i("H//4"),width:"64",height:"64",alt:"添加"}})]):e._e()],2)])]),e._v(" "),e.isDesc?n("div",{staticClass:"upload_warp_text"},[n("span",[e._v("选中"+e._s(e.imgList.length)+"张图片，共"+e._s(e.bytesToSize(e.size)))])]):e._e(),e._v(" "),e.isShow?n("div",{staticClass:"mask",on:{click:function(t){e.isShow=!1}}},[n("div",{staticClass:"mask_content"},[n("img",{attrs:{src:e.maskSrc,alt:""}})])]):e._e()])},staticRenderFns:[]};var a=i("VU/8")(n,s,!1,function(e){i("mdd9")},"data-v-22b98364",null).exports,r={version:"1.0.7",install:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];"undefined"!=typeof window&&window.Vue&&(e=window.Vue),e.component(a.name,a)},FileUpload:a};t.default=r},mdd9:function(e,t){}})});